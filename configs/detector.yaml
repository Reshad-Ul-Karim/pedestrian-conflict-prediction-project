# YOLOv8 Detector Configuration
# For RSUD20K dataset training

# Model configuration
model:
  type: yolov8m  # yolov8s, yolov8m, yolov8l, yolov8x
  pretrained: true
  input_size: 640

# Training configuration
training:
  epochs: 150
  batch_size: 16
  imgsz: 640
  device: 0  # GPU device, or 'mps' for Apple Silicon, 'cpu' for CPU
  workers: 8
  project: outputs/models
  name: detector_rsud20k
  
  # Optimizer
  optimizer: AdamW  # SGD or AdamW
  lr0: 0.01  # Initial learning rate
  lrf: 0.01  # Final learning rate factor
  momentum: 0.937
  weight_decay: 0.0005
  
  # Learning rate scheduler
  warmup_epochs: 3
  warmup_momentum: 0.8
  warmup_bias_lr: 0.1

# Data augmentation
augmentation:
  hsv_h: 0.015  # HSV-Hue augmentation
  hsv_s: 0.7    # HSV-Saturation
  hsv_v: 0.4    # HSV-Value
  degrees: 0.0  # Rotation (+/- deg)
  translate: 0.1  # Translation (+/- fraction)
  scale: 0.5    # Scale (+/- gain)
  shear: 0.0    # Shear (+/- deg)
  perspective: 0.0  # Perspective (+/- fraction)
  flipud: 0.0   # Flip up-down probability
  fliplr: 0.5   # Flip left-right probability
  mosaic: 1.0   # Mosaic probability
  mixup: 0.0    # Mixup probability
  copy_paste: 0.0  # Copy-paste probability

# Validation
validation:
  val_interval: 1  # Validate every N epochs
  save_period: -1  # Save checkpoint every N epochs (-1 to disable)
  save_best: true
  patience: 50  # Early stopping patience

# Class weights (optional, for imbalanced classes)
class_weights:
  person: 2.0  # Increase weight for pedestrian class
  bicycle: 1.5
  motorcycle: 1.5
  car: 1.0
  bus: 1.0
  truck: 1.0
  rickshaw: 1.5
  auto-rickshaw: 1.5

# Evaluation metrics
metrics:
  iou_threshold: 0.6
  conf_threshold: 0.001
  max_det: 300

